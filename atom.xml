<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[快樂小碼農]]></title>
  <link href="http://copy0401.github.io/atom.xml" rel="self"/>
  <link href="http://copy0401.github.io/"/>
  <updated>2021-03-11T01:26:51+08:00</updated>
  <id>http://copy0401.github.io/</id>
  <author>
    <name><![CDATA[copy0401]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Hello World]]></title>
    <link href="http://copy0401.github.io/blog/2016/09/10/hello-world/"/>
    <updated>2016-09-10T01:56:05+08:00</updated>
    <id>http://copy0401.github.io/blog/2016/09/10/hello-world</id>
    <content type="html"><![CDATA[<h2><a href="https://copy0401.github.io">Github Pages</a></h2>

<h2><a href="https://github.com/copy0401/copy0401.github.io">Github Pages Source Code</a></h2>

<h2><a href="https://gist.github.com/copy0401">Github Gist</a></h2>

<hr />
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Build Status]]></title>
    <link href="http://copy0401.github.io/blog/2016/09/08/build-status/"/>
    <updated>2016-09-08T23:59:59+08:00</updated>
    <id>http://copy0401.github.io/blog/2016/09/08/build-status</id>
    <content type="html"><![CDATA[<p><a href="https://travis-ci.com/copy0401/copy0401.github.io"><img src="https://travis-ci.com/copy0401/copy0401.github.io.svg?branch=source" alt="Build Status" /></a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[![Build Status](https://travis-ci.com/copy0401/copy0401.github.io.svg?branch=source)](https://travis-ci.com/copy0401/copy0401.github.io)</span></code></pre></td></tr></table></div></figure>


<p><a href="http://prose.io/#copy0401/copy0401.github.io">prose.io Edit</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Travis CI]]></title>
    <link href="http://copy0401.github.io/blog/2016/09/07/travis-ci/"/>
    <updated>2016-09-07T05:56:05+08:00</updated>
    <id>http://copy0401.github.io/blog/2016/09/07/travis-ci</id>
    <content type="html"><![CDATA[<h2>Set Up SSH Keys (for repo deploy)</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh-keygen -t rsa -b 4096 -C "copy0401@gmail.com"</span></code></pre></td></tr></table></div></figure>


<p>1./Users/電腦使用者名稱/.ssh/id_rsa_deploy</p>

<p>2.輸入密碼 留白 Enter</p>

<p>3.再次輸入密碼 留白 Enter</p>

<p>會產生一組金鑰</p>

<p>公鑰: <code>id_rsa_deploy.pub</code></p>

<p>私鑰: <code>id_rsa_deploy</code></p>

<p>( 私鑰base64編碼: <code>id_rsa_deploy_base64</code> 後面會介紹 )</p>

<hr />

<h2>github repo add deploy key</h2>

<p>in copy0401/copy0401.github.io</p>

<blockquote><p><code>Settings</code> > <code>Deploy keys</code> > <code>add deploy key</code></p></blockquote>

<p>Title: <code>travis deploy</code></p>

<p>Key: 填入 <code>id_rsa_deploy.pub</code> 公鑰內容</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ssh-rsa AAAAB3NzaC1yc2EA...gzR7LH/iSxYwxSbb9+Q== copy0401@gmail.com</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>github token (public_repo)</h2>

<p>github.com > <code>your_settings</code> ><code>Developer settings</code> > <code>Personal access tokens</code> > <code>Generate new token</code></p>

<p>note: Travis access</p>

<p>Select scopes : public_repo</p>

<p>Generate token = > <code>123a1c1ed1dfa1fc1234b123456a12abd1234567</code></p>

<hr />

<h2>GH_TOKEN</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem install travis</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>travis encrypt 'GH_TOKEN=123a1c1ed1dfa1fc1234b123456a12abd1234567' --add</span></code></pre></td></tr></table></div></figure>


<p>or</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>travis encrypt 'GIT_NAME="copy0401" GIT_EMAIL=copy0401@gmail.com GH_TOKEN=123a1c1ed1dfa1fc1234b123456a12abd1234567' --add</span></code></pre></td></tr></table></div></figure>


<p><code>.travis.yml</code> 中增加 <code>GH_TOKEN=[secure]</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>travis login --pro  --auto
</span><span class='line'>travis encrypt SOMEVAR="secretvalue" --add</span></code></pre></td></tr></table></div></figure>


<p><code>.travis.yml</code> 中增加 <code>SOMEVAR=[secure]</code></p>

<hr />

<h2>To generate secure SSH deploy key for a github repo to be used from Travis</h2>

<p>參考: <a href="https://gist.github.com/floydpink/4631240">https://gist.github.com/floydpink/4631240</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>base64 --break=0 ~/.ssh/id_rsa_deploy &gt; ~/.ssh/id_rsa_deploy_base64</span></code></pre></td></tr></table></div></figure>


<p><code>id_rsa_deploy</code> 轉換為base64編碼為 <code>id_rsa_deploy_base64</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ENCRYPTION_FILTER="echo \$(echo \"- secure: \")\$(travis encrypt \"\$FILE='\`cat $FILE\`'\" -r copy0401/copy0401.github.io)"</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew install coreutils 
</span><span class='line'>gsplit --bytes=100 --numeric-suffixes --suffix-length=2 --filter="$ENCRYPTION_FILTER" ~/.ssh/id_rsa_deploy_base64 id_rsa_</span></code></pre></td></tr></table></div></figure>


<blockquote><p>會產生約46行內容 貼到 <code>.travis.yml</code> 最後面 注意格式,前面加 <code> -</code></p></blockquote>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>env:
</span><span class='line'>  global:
</span><span class='line'>  - secure: "rpdVrWM...xtOuONAE="
</span><span class='line'>  - secure: "aJGiNmI...nzpD62Sk="
</span><span class='line'>  - secure: "O1rEHB...Yu+xXGFQc="
</span><span class='line'>    .
</span><span class='line'>    .
</span><span class='line'>    .
</span><span class='line'>  - secure: "O1rEHB...pDCdFd3d="</span></code></pre></td></tr></table></div></figure>


<p>修改 <code>.travis.yml</code> 內容
在 <code>before_script:</code> 下面增加這幾行內容</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>before_script:
</span><span class='line'>  - echo -n $id_rsa_{00..30} &gt;&gt; ~/.ssh/id_rsa_base64
</span><span class='line'>  - base64 --decode --ignore-garbage ~/.ssh/id_rsa_base64 &gt; ~/.ssh/id_rsa
</span><span class='line'>  - chmod 600 ~/.ssh/id_rsa
</span><span class='line'>  - echo -e "Host github.com\n\tStrictHostKeyChecking no\n" &gt;&gt; ~/.ssh/config</span></code></pre></td></tr></table></div></figure>


<hr />

<h2>.travis.yml</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>env:
</span><span class='line'>  global:
</span><span class='line'>  - GH_REPO="copy0401/copy0401.github.io" # 依照自己的 github_name/github_repo 設定
</span><span class='line'>  - secure: "rpdVrWM...xtOuONAE=" # 解析後就是 GH_TOKEN 
</span><span class='line'>  - secure: "x87sdje...in0xdase=" # 解析後就是 SOMEVAR
</span><span class='line'>  - secure: "aJGiNmI...nzpD62Sk=" # 解析後就是 id_rsa_00
</span><span class='line'>  - secure: "O1rEHB...Yu+xXGFQc=" # 解析後就是 id_rsa_01
</span><span class='line'>  - secure: "nzpD6ec...xtOuONAE=" # 解析後就是 id_rsa_02
</span><span class='line'>   .
</span><span class='line'>   .
</span><span class='line'>   .
</span><span class='line'>  - secure: "nzpD6ec...xtOuONAE=" # 解析後就是 id_rsa_45</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>travis encrypt 'GH_TOKEN=123a1c1ed1dfa1fc1234b123456a12abd1234567' --add
</span><span class='line'>travis encrypt SOMEVAR="secretvalue" --add
</span><span class='line'>gsplit --bytes=100 --numeric-suffixes --suffix-length=2 --filter="$ENCRYPTION_FILTER" ~/.ssh/id_rsa_deploy_base64 id_rsa_</span></code></pre></td></tr></table></div></figure>


<p>修改內容 <a href="https://github.com/copy0401/copy0401.github.io/blob/source/.travis.yml">.travis.yml</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Set Octopress]]></title>
    <link href="http://copy0401.github.io/blog/2016/09/06/set-octopress-disqus/"/>
    <updated>2016-09-06T01:56:05+08:00</updated>
    <id>http://copy0401.github.io/blog/2016/09/06/set-octopress-disqus</id>
    <content type="html"><![CDATA[<p>Disqus 申請帳號</p>

<p>登入Disqus帳號</p>

<p>點選 右上頭像 > 點選 Settings</p>

<p>點選 右上頭像 > 點選 Add Disqus To Site</p>

<p>點選 Start Using Engage</p>

<p>Site name 輸入留言板的名字</p>

<p>如: <code>copy0401</code></p>

<p>Choose your unique Disqus URL 輸入留言版的網址</p>

<p>如: <a href="http://disqus.com/by/copy0401">http://disqus.com/by/copy0401</a></p>

<p>Category 選擇類別</p>

<p>如: Tech</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/octopress
</span><span class='line'>vim _config.yml
</span><span class='line'>disqus_short_name: copy0401
</span><span class='line'>disqus_show_comment_count: true</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Set Octopress Theme]]></title>
    <link href="http://copy0401.github.io/blog/2016/09/05/set-octopress-theme/"/>
    <updated>2016-09-05T01:56:05+08:00</updated>
    <id>http://copy0401.github.io/blog/2016/09/05/set-octopress-theme</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/octopress
</span><span class='line'>git clone git://github.com/lucaslew/whitespace.git .themes/whitespace
</span><span class='line'>rake install['whitespace'] # for zsh, use: rake install\['whitespace'\]
</span><span class='line'>rake generate
</span><span class='line'>rake preview</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p>git@github.com:[your_username]/[your_username].github.io.git</p>

<p>例如輸入</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git@github.com:copy0401/copy0401.github.io</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate
</span><span class='line'>rake deploy</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Install Octopress]]></title>
    <link href="http://copy0401.github.io/blog/2016/09/04/install_octopress/"/>
    <updated>2016-09-04T01:56:05+08:00</updated>
    <id>http://copy0401.github.io/blog/2016/09/04/install_octopress</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd ~/
</span><span class='line'>git clone git://github.com/imathis/octopress.git octopress
</span><span class='line'>cd octopress
</span><span class='line'>gem install bundler
</span><span class='line'>bundle install
</span><span class='line'>rake install
</span><span class='line'>rake preview</span></code></pre></td></tr></table></div></figure>


<p><a href="http://localhost:4000/">http://localhost:4000/</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p>git@github.com:[your_username]/[your_username].github.io.git</p>

<p>例如輸入</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git@github.com:copy0401/copy0401.github.io</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake generate
</span><span class='line'>rake preview
</span><span class='line'>rake deploy</span></code></pre></td></tr></table></div></figure>


<hr />

<p>新的頁面</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake new_page["title"] # for zsh, use: rake new_page\["title"\]</span></code></pre></td></tr></table></div></figure>


<p>or</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake new_page[about/index.html] # for zsh, use: rake new_page\[about/index.html\]</span></code></pre></td></tr></table></div></figure>


<p>再去 <code>source/_includes/custom/navigation.html</code> 新增連結</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;ul class="main-navigation"&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="http://copy0401.github.io/"&gt;Blog&lt;/a&gt;&lt;/li&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="http://copy0401.github.io/blog/categories/octopress/"&gt;Octopress&lt;/a&gt;&lt;/li&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="http://copy0401.github.io/blog/archives"&gt;Archives&lt;/a&gt;&lt;/li&gt;
</span><span class='line'>  &lt;li&gt;&lt;a href="http://copy0401.github.io/about"&gt;About&lt;/a&gt;&lt;/li&gt;
</span><span class='line'>&lt;/ul&gt;</span></code></pre></td></tr></table></div></figure>


<hr />

<p>撰寫文章</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake new_post["title"]</span></code></pre></td></tr></table></div></figure>


<p>產生新的檔案 <code>YYYY-MM-DD-title.markdown</code> 到 <code>source/_posts/</code></p>

<p>如果 <code>.markdown</code> 要改成 <code>.md</code> 可以到修改 <code>Rakefile</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>new_post_ext    = "md"
</span><span class='line'>new_page_ext    = "md"</span></code></pre></td></tr></table></div></figure>


<hr />

<p>Push to Github</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git add .
</span><span class='line'>git commit -m "some commit"
</span><span class='line'>git push origin source</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
</feed>
